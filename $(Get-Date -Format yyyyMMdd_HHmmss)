[1mdiff --git a/.kiro/specs/trader-strategy-plugin/tasks.md b/.kiro/specs/trader-strategy-plugin/tasks.md[m
[1mnew file mode 100644[m
[1mindex 00000000..f01eb5c5[m
[1m--- /dev/null[m
[1m+++ b/.kiro/specs/trader-strategy-plugin/tasks.md[m
[36m@@ -0,0 +1,215 @@[m
[32m+[m[32m# Implementation Plan: Trader Strategy Plugin System[m
[32m+[m
[32m+[m[32m## Overview[m
[32m+[m
[32m+[m[32mThis implementation plan transforms the existing hardcoded MA cross trading system into a pluggable strategy architecture. The approach maintains backward compatibility while adding new strategies (BB Squeeze, Volume Breakout) and fixing critical go/no-go issues in paper mode. Each task builds incrementally, ensuring the system remains functional throughout development.[m
[32m+[m
[32m+[m[32m## Tasks[m
[32m+[m
[32m+[m[32m- [ ] 1. Create strategy plugin foundation[m
[32m+[m[32m  - [ ] 1.1 Implement Strategy Protocol interface and StrategyResult dataclass[m
[32m+[m[32m    - Create trader/strategies/base.py with Strategy Protocol and StrategyResult[m
[32m+[m[32m    - Define compute method signature and property requirements[m
[32m+[m[32m    - Add type hints and documentation[m
[32m+[m[32m    - _Requirements: 1.5, 1.6_[m
[32m+[m
[32m+[m[32m  - [ ] 1.2 Write property test for Strategy interface compliance[m
[32m+[m[32m    - **Property 3: Strategy Interface Compliance**[m
[32m+[m[32m    - **Validates: Requirements 1.5, 1.6**[m
[32m+[m
[32m+[m[32m  - [ ] 1.3 Implement Strategy Registry core functionality[m
[32m+[m[32m    - Create trader/strategies/registry.py with StrategyRegistry class[m
[32m+[m[32m    - Implement get_strategy, list_strategies, resolve_strategy methods[m
[32m+[m[32m    - Add StrategyInfo dataclass for metadata[m
[32m+[m[32m    - _Requirements: 1.1, 1.2, 1.3_[m
[32m+[m
[32m+[m[32m  - [ ] 1.4 Write property tests for Strategy Registry interface[m
[32m+[m[32m    - **Property 1: Strategy Registry Interface Completeness**[m
[32m+[m[32m    - **Validates: Requirements 1.1, 1.2, 1.3**[m
[32m+[m
[32m+[m[32m- [ ] 2. Implement core trading strategies[m
[32m+[m[32m  - [ ] 2.1 Refactor existing MA cross strategy to use new interface[m
[32m+[m[32m    - Update trader/strategies/ma_cross.py to implement Strategy Protocol[m
[32m+[m[32m    - Convert calculate_ma_cross_signal to compute method[m
[32m+[m[32m    - Add parameter schema and metadata properties[m
[32m+[m[32m    - _Requirements: 2.3, 7.2_[m
[32m+[m
[32m+[m[32m  - [ ] 2.2 Write unit tests for MA cross strategy backward compatibility[m
[32m+[m[32m    - Test that new implementation produces same results as legacy[m
[32m+[m[32m    - Test parameter configuration and edge cases[m
[32m+[m[32m    - _Requirements: 2.3, 7.2_[m
[32m+[m
[32m+[m[32m  - [ ] 2.3 Implement BB Squeeze strategy[m
[32m+[m[32m    - Create trader/strategies/bb_squeeze.py with Bollinger Band squeeze logic[m
[32m+[m[32m    - Implement volatility expansion detection algorithm[m
[32m+[m[32m    - Add configurable parameters (bb_period, bb_std, squeeze_threshold)[m
[32m+[m[32m    - Ensure no volume data requirements[m
[32m+[m[32m    - _Requirements: 2.1, 2.4_[m
[32m+[m
[32m+[m[32m  - [ ] 2.4 Write property test for BB Squeeze volume independence[m
[32m+[m[32m    - **Property 5: Volume Independence for BB Squeeze**[m
[32m+[m[32m    - **Validates: Requirements 2.4**[m
[32m+[m
[32m+[m[32m  - [ ] 2.5 Implement Breakout Volume strategy[m
[32m+[m[32m    - Create trader/strategies/breakout_volume.py with range breakout logic[m
[32m+[m[32m    - Implement volume filter validation[m
[32m+[m[32m    - Add configurable parameters (lookback_period, volume_threshold)[m
[32m+[m[32m    - Mark as requiring volume data[m
[32m+[m[32m    - _Requirements: 2.2_[m
[32m+[m
[32m+[m[32m  - [ ] 2.6 Write property test for volume fallback logic[m
[32m+[m[32m    - **Property 2: Volume Fallback Consistency**[m
[32m+[m[32m    - **Validates: Requirements 1.4, 2.5**[m
[32m+[m
[32m+[m[32m- [ ] 3. Checkpoint - Ensure strategy implementations work[m
[32m+[m[32m  - Ensure all tests pass, ask the user if questions arise.[m
[32m+[m
[32m+[m[32m- [ ] 4. Integrate strategies with registry system[m
[32m+[m[32m  - [ ] 4.1 Register all strategies in registry[m
[32m+[m[32m    - Update trader/strategies/__init__.py to export registry[m
[32m+[m[32m    - Register ma_cross, bb_squeeze, breakout_volume strategies[m
[32m+[m[32m    - Set bb_squeeze as default strategy[m
[32m+[m[32m    - _Requirements: 2.6, 6.6, 7.1_[m
[32m+[m
[32m+[m[32m  - [ ] 4.2 Write property test for strategy availability[m
[32m+[m[32m    - **Property 4: Strategy Implementation Availability**[m
[32m+[m[32m    - **Validates: Requirements 2.1, 2.2, 2.3, 7.2**[m
[32m+[m
[32m+[m[32m  - [ ] 4.3 Implement volume fallback resolution logic[m
[32m+[m[32m    - Add resolve_strategy method with DataFrame analysis[m
[32m+[m[32m    - Implement automatic fallback to bb_squeeze when volume missing[m
[32m+[m[32m    - Add logging for fallback events[m
[32m+[m[32m    - _Requirements: 1.4, 2.5_[m
[32m+[m
[32m+[m[32m  - [ ] 4.4 Write property test for default strategy resolution[m
[32m+[m[32m    - **Property 6: Default Strategy Resolution**[m
[32m+[m[32m    - **Validates: Requirements 2.6, 3.4, 7.1**[m
[32m+[m
[32m+[m[32m- [ ] 5. Update entry points for strategy selection[m
[32m+[m[32m  - [ ] 5.1 Update run_paper_sim.py for strategy support[m
[32m+[m[32m    - Add --strategy CLI argument parsing[m
[32m+[m[32m    - Add TRADER_STRATEGY environment variable support[m
[32m+[m[32m    - Integrate with strategy registry for strategy selection[m
[32m+[m[32m    - Replace direct MA cross calls with registry-based strategy execution[m
[32m+[m[32m    - _Requirements: 3.1_[m
[32m+[m
[32m+[m[32m  - [ ] 5.2 Update run_backtest_multi_assets.py for strategy support[m
[32m+[m[32m    - Add --strategy CLI argument parsing[m
[32m+[m[32m    - Add TRADER_STRATEGY environment variable support[m
[32m+[m[32m    - Integrate with strategy registry for strategy selection[m
[32m+[m[32m    - Replace direct MA cross calls with registry-based strategy execution[m
[32m+[m[32m    - _Requirements: 3.2_[m
[32m+[m
[32m+[m[32m  - [ ] 5.3 Update run_live_trade.py for strategy support[m
[32m+[m[32m    - Add --strategy CLI argument parsing[m
[32m+[m[32m    - Add TRADER_STRATEGY environment variable support[m
[32m+[m[32m    - Integrate with strategy registry for strategy selection[m
[32m+[m[32m    - Replace direct MA cross calls with registry-based strategy execution[m
[32m+[m[32m    - _Requirements: 3.3_[m
[32m+[m
[32m+[m[32m  - [ ] 5.4 Write property test for universal entry point strategy support[m
[32m+[m[32m    - **Property 7: Universal Entry Point Strategy Support**[m
[32m+[m[32m    - **Validates: Requirements 3.1, 3.2, 3.3, 3.5**[m
[32m+[m
[32m+[m[32m- [ ] 6. Enhance signal output with strategy metadata[m
[32m+[m[32m  - [ ] 6.1 Extend signals_latest.json output format[m
[32m+[m[32m    - Update trader/ml/pipeline.py to include strategy metadata[m
[32m+[m[32m    - Add strategy_id, signal, reasons, entry, stop, confidence fields[m
[32m+[m[32m    - Maintain backward compatibility with existing fields[m
[32m+[m[32m    - _Requirements: 4.1, 4.2, 4.3, 4.4, 4.5, 4.6, 7.5_[m
[32m+[m
[32m+[m[32m  - [ ] 6.2 Write property test for enhanced signal output completeness[m
[32m+[m[32m    - **Property 8: Enhanced Signal Output Completeness**[m
[32m+[m[32m    - **Validates: Requirements 4.1, 4.2, 4.3, 4.4, 4.5, 4.6, 7.5**[m
[32m+[m
[32m+[m[32m  - [ ] 6.3 Update chart generation to display entry/stop levels[m
[32m+[m[32m    - Modify trader/ml/viz.py to draw horizontal lines for entry/stop levels[m
[32m+[m[32m    - Handle cases where entry/stop levels are None[m
[32m+[m[32m    - _Requirements: 4.7_[m
[32m+[m
[32m+[m[32m- [ ] 7. Fix go/no-go ri